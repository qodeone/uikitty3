/*! UIkit 3.0.0-beta.1 | http://www.getuikit.com | (c) 2014 - 2016 YOOtheme | MIT License */

!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(require("uikit")):"function"==typeof define&&define.amd?define(["uikit"],i):i(t.UIkit)}(this,function(t){"use strict";var i,e=t.util.$,o=t.util.doc,n=t.util.extend,s=t.util.Dimensions,h=t.util.getIndex,a=t.util.Transition;o.on({keydown:function(t){if(i)switch(t.keyCode){case 37:i.show("previous");break;case 39:i.show("next")}}}),UIkit.component("lightbox",{name:"lightbox",props:{toggle:String,duration:Number,inverse:Boolean},defaults:{toggle:"a",duration:400,dark:!1,attrItem:"uk-lightbox-item",items:[],index:0},ready:function(){var t=this;this.toggles=e(this.toggle,this.$el),this.toggles.each(function(i,o){o=e(o),t.items.push({source:o.attr("href"),title:o.attr("title"),type:o.attr("type")})}),this.$el.on("click",this.toggle+":not(.uk-disabled)",function(i){i.preventDefault(),t.show(t.toggles.index(i.currentTarget))})},update:{write:function(){var t=this,i=this.getItem();if(this.modal&&i.content){var o=this.modal.panel,n={width:o.width(),height:o.height()},h={width:window.innerWidth-(o.outerWidth(!0)-n.width),height:window.innerHeight-(o.outerHeight(!0)-n.height)},r=s.fit({width:i.width,height:i.height},h);a.stop(o).stop(this.modal.content),this.modal.content&&this.modal.content.remove(),this.modal.content=e(i.content).css("opacity",0).appendTo(o),o.css(n),a.start(o,r,this.duration).then(function(){a.start(t.modal.content,{opacity:1},400).then(function(){o.find("[uk-transition-hide]").show(),o.find("[uk-transition-show]").hide()})})}},events:["resize","orientationchange"]},events:{showitem:function(t){var i=this.getItem();i.content&&(this.$update(),t.stopImmediatePropagation())}},methods:{show:function(t){var o=this;this.index=h(t,this.items,this.index),this.modal||(this.modal=UIkit.modal.dialog('\n                    <button class="uk-modal-close-outside" uk-transition-hide type="button" uk-close></button>\n                    <span class="uk-position-center" uk-transition-show uk-icon="icon: trash"></span>\n                    ',{center:!0}),this.modal.$el.css("overflow","hidden").addClass("uk-modal-lightbox"),this.modal.panel.css({width:200,height:200}),this.modal.caption=e('<div class="uk-modal-caption" uk-transition-hide></div>').appendTo(this.modal.panel),this.items.length>1&&e('<div class="'+(this.dark?"uk-dark":"uk-light")+'" uk-transition-hide>\n                            <a href="#" class="uk-position-center-left" uk-slidenav="previous" uk-lightbox-item="previous"></a>\n                            <a href="#" class="uk-position-center-right" uk-slidenav="next" uk-lightbox-item="next"></a>\n                        </div>\n                    ').appendTo(this.modal.panel.addClass("uk-slidenav-position")),this.modal.$el.on("hide",this.hide).on("click","["+this.attrItem+"]",function(t){t.preventDefault(),o.show(e(t.currentTarget).attr(o.attrItem))}).on("swipeRight swipeLeft",function(t){t.preventDefault(),window.getSelection().toString()||o.show("swipeLeft"==t.type?"next":"previous")})),i=this,this.modal.panel.find("[uk-transition-hide]").hide(),this.modal.panel.find("[uk-transition-show]").show(),this.modal.content&&this.modal.content.remove(),this.modal.caption.text(this.getItem().title);var n=e.Event("showitem");this.$el.trigger(n),n.isImmediatePropagationStopped()||this.setError(this.getItem())},hide:function(){var t=this;i=i&&i!==this&&i,this.modal.hide().then(function(){t.modal.$destroy(!0),t.modal=null})},getItem:function(){return this.items[this.index]||{source:"",title:"",type:""}},setItem:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;n(t,{content:i,width:e,height:o}),this.$update()},setError:function(t){this.setItem(t,'<div class="uk-position-cover uk-flex uk-flex-middle uk-flex-center"><strong>Loading resource failed!</strong></div>',400,300)}}}),UIkit.mixin({events:{showitem:function(t){var i=this,e=this.getItem();if("image"===e.type||!e.source||e.source.match(/\.(jp(e)?g|png|gif|svg)$/i)){var o=new Image;o.onerror=function(){return i.setError(e)},o.onload=function(){return i.setItem(e,'<img class="uk-responsive-width" width="'+o.width+'" height="'+o.height+'" src ="'+e.source+'">',o.width,o.height)},o.src=e.source,t.stopImmediatePropagation()}}}},"lightbox"),UIkit.mixin({events:{showitem:function(t){var i=this,o=this.getItem();if("video"===o.type||!o.source||o.source.match(/\.(mp4|webm|ogv)$/i)){var n=e('<video class="uk-responsive-width" controls></video>').on("loadedmetadata",function(){return i.setItem(o,n.attr({width:n[0].videoWidth,height:n[0].videoHeight}),n[0].videoWidth,n[0].videoHeight)}).attr("src",o.source);t.stopImmediatePropagation()}}}},"lightbox"),UIkit.mixin({events:{showitem:function(t){var i=this,e=this.getItem(),o=void 0;if((o=e.source.match(/\/\/.*?youtube\.[a-z]+\/watch\?v=([^&]+)&?(.*)/))||e.source.match(/youtu\.be\/(.*)/)){var n=o[1],s=new Image,h=!1,a=function(t,o){return i.setItem(e,'<iframe src="//www.youtube.com/embed/'+n+'" width="'+t+'" height="'+o+'" style="max-width:100%;box-sizing:border-box;"></iframe>',t,o)};s.onerror=function(){return a(640,320)},s.onload=function(){120===s.width&&90===s.height?h?a(640,320):(h=!0,s.src="//img.youtube.com/vi/"+n+"/0.jpg"):a(s.width,s.height)},s.src="//img.youtube.com/vi/"+n+"/maxresdefault.jpg",t.stopImmediatePropagation()}}}},"lightbox"),UIkit.mixin({events:{showitem:function(t){var i=this,o=this.getItem(),n=void 0;if(n=o.source.match(/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/)){var s=n[2],h=function(t,e){return i.setItem(o,'<iframe src="//player.vimeo.com/video/'+s+'" width="'+t+'" height="'+e+'" style="max-width:100%;box-sizing:border-box;"></iframe>',t,e)};e.ajax({type:"GET",url:"http://vimeo.com/api/oembed.json?url="+encodeURI(o.source),jsonp:"callback",dataType:"jsonp"}).then(function(t){return h(t.width,t.height)}),t.stopImmediatePropagation()}}}},"lightbox")});